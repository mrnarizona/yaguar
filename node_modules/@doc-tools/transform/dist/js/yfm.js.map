{"version":3,"file":"yfm.js","sources":["../../node_modules/get-root-node-polyfill/index.js","../../src/src/js/polyfill.js","../../src/src/js/utils.ts","../../src/src/js/tabs.ts","../../src/src/js/code.ts","../../src/src/js/cut.ts","../../src/src/js/term/utils.ts","../../src/src/js/term/index.ts"],"sourcesContent":["'use strict';\n\n// Node getRootNode(optional GetRootNodeOptions options);\n\n/**\n * Returns the context object’s shadow-including root if options’s composed is true.\n * Returns the context object’s root otherwise.\n *\n * The root of an object is itself, if its parent is null, or else it is the root of its parent.\n *\n * The shadow-including root of an object is its root’s host’s shadow-including root,\n * if the object’s root is a shadow root, and its root otherwise.\n *\n * https://dom.spec.whatwg.org/#dom-node-getrootnode\n *\n * @memberof Node.prototype\n * @param {!Object} [opt = {}] - Options.\n * @param {!boolean} [opt.composed] - See above description.\n * @returns {!Node} The root node.\n */\nfunction getRootNode(opt) {\n  var composed = typeof opt === 'object' && Boolean(opt.composed);\n\n  return composed ? getShadowIncludingRoot(this) : getRoot(this);\n}\n\nfunction getShadowIncludingRoot(node) {\n  var root = getRoot(node);\n\n  if (isShadowRoot(root)) {\n    return getShadowIncludingRoot(root.host);\n  }\n\n  return root;\n}\n\nfunction getRoot(node) {\n  if (node.parentNode != null) {\n    return getRoot(node.parentNode);\n  }\n\n  return node;\n}\n\nfunction isShadowRoot(node) {\n  return node.nodeName === '#document-fragment' && node.constructor.name === 'ShadowRoot';\n}\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = getRootNode;\n}\n","import getRootNode from 'get-root-node-polyfill';\n\nif (typeof document !== 'undefined') {\n    // matches polyfill for old edge\n    (function (e) {\n        const matches =\n            e.matches ||\n            e.matchesSelector ||\n            e.webkitMatchesSelector ||\n            e.mozMatchesSelector ||\n            e.msMatchesSelector ||\n            e.oMatchesSelector;\n\n        if (matches) {\n            e.matches = e.matchesSelector = matches;\n        } else {\n            e.matches = e.matchesSelector = function matches(selector) {\n                const rootNode = e.getRootNode ? e.getRootNode() : getRootNode.call(e);\n                const matches = rootNode.querySelectorAll(selector);\n                const th = this;\n                return Array.prototype.some.call(matches, (e) => {\n                    return e === th;\n                });\n            };\n        }\n    })(Element.prototype);\n}\n","export const getEventTarget = (event: Event) => {\n    const path = event.composedPath();\n    return Array.isArray(path) && path.length > 0 ? path[0] : event.target;\n};\n\nexport const isCustom = (event: Event) => {\n    const target = getEventTarget(event);\n    return !target || !(target as HTMLElement).matches;\n};\n","import {isCustom, getEventTarget} from './utils';\n\nconst Selector = {\n    TABS: '.yfm .yfm-tabs',\n    TAB_LIST: '.yfm .yfm-tab-list',\n    TAB: '.yfm .yfm-tab',\n    TAB_PANEL: '.yfm .yfm-tab-panel',\n};\n\nconst ClassName = {\n    ACTIVE: 'active',\n};\n\nfunction selectTab(element: HTMLElement) {\n    const parentNode = element.parentNode as HTMLElement;\n    if (\n        !parentNode ||\n        !parentNode.matches(Selector.TAB_LIST) ||\n        !parentNode.parentNode ||\n        !(parentNode.parentNode as HTMLElement).matches(Selector.TABS) ||\n        element.classList.contains(ClassName.ACTIVE)\n    ) {\n        return;\n    }\n\n    const tab = element;\n    const tabList = tab.parentNode;\n    const tabsContainer = tabList?.parentNode;\n    const allTabs = Array.from(tabsContainer?.querySelectorAll(Selector.TAB) || []);\n    const allPanels = Array.from(tabsContainer?.querySelectorAll(Selector.TAB_PANEL) || []);\n    const targetIndex = allTabs.indexOf(tab);\n\n    for (let i = 0; i < allTabs.length; i++) {\n        const tab = allTabs[i];\n        const panel = allPanels[i];\n\n        if (i === targetIndex) {\n            tab.classList.toggle(ClassName.ACTIVE, true);\n            tab.setAttribute('aria-selected', 'true');\n            tab.setAttribute('tabindex', '0');\n            panel.classList.toggle(ClassName.ACTIVE, true);\n        } else {\n            tab.classList.toggle(ClassName.ACTIVE, false);\n            tab.setAttribute('aria-selected', 'false');\n            tab.setAttribute('tabindex', '-1');\n            panel.classList.toggle(ClassName.ACTIVE, false);\n        }\n    }\n}\n\nif (typeof document !== 'undefined') {\n    document.addEventListener('click', (event) => {\n        const target = getEventTarget(event) as HTMLElement;\n\n        if (isCustom(event) || !target.matches(Selector.TAB)) {\n            return;\n        }\n\n        selectTab(target);\n    });\n}\n","import {getEventTarget, isCustom} from './utils';\n\nconst BUTTON_SELECTOR = '.yfm-clipboard-button';\n\nfunction copyToClipboard(text: string) {\n    if (!text) {\n        return Promise.resolve();\n    }\n\n    if (navigator.clipboard && typeof navigator.clipboard.writeText) {\n        return navigator.clipboard.writeText(text);\n    }\n    const textarea = document.createElement('textarea');\n    textarea.setAttribute('style', 'position: absolute; left: 1000%');\n    textarea.textContent = text;\n    document.body.append(textarea);\n\n    textarea.select();\n    document.execCommand('copy');\n\n    document.body.removeChild(textarea);\n\n    return Promise.resolve();\n}\n\nfunction notifySuccess(svgButton: HTMLElement | null) {\n    if (!svgButton) {\n        return;\n    }\n\n    const id = svgButton.getAttribute('data-animation');\n    // @ts-expect-error\n    const icon = svgButton.getRootNode().getElementById(`visibileAnimation-${id}`);\n\n    if (!icon) {\n        return;\n    }\n\n    icon.beginElement();\n}\n\nif (typeof document !== 'undefined') {\n    document.addEventListener('click', (event) => {\n        const target = getEventTarget(event) as HTMLElement;\n\n        if (isCustom(event) || !target.matches(BUTTON_SELECTOR)) {\n            return;\n        }\n\n        const parent = target.parentNode;\n\n        if (!parent) {\n            return;\n        }\n\n        const code = parent.querySelector<HTMLElement>('pre code');\n        if (!code) {\n            return;\n        }\n\n        copyToClipboard(code.innerText).then(() => {\n            notifySuccess(parent.querySelector('.yfm-clipboard-button'));\n        });\n    });\n}\n","import {getEventTarget, isCustom} from './utils';\n\nconst Selector = {\n    CUT: '.yfm .yfm-cut',\n    TITLE: '.yfm .yfm-cut-title',\n    CONTENT: '.yfm .yfm-cut-content',\n};\n\nconst ClassName = {\n    OPEN: 'open',\n};\n\nfunction toggleCut(element: HTMLElement) {\n    const cutNode = element.parentNode;\n\n    if (!(cutNode instanceof HTMLElement)) {\n        return;\n    }\n\n    cutNode.classList.toggle(ClassName.OPEN);\n}\n\nfunction matchTitle(target: EventTarget | null) {\n    if (!(target instanceof HTMLElement)) {\n        return false;\n    }\n\n    return target?.matches?.(Selector.TITLE);\n}\n\nfunction findTitleInPath(event: MouseEvent): HTMLElement | undefined {\n    const target = getEventTarget(event);\n\n    if (matchTitle(target)) {\n        return target as HTMLElement;\n    }\n\n    const path = event.composedPath?.();\n\n    return path?.find(matchTitle) as HTMLElement | undefined;\n}\n\nif (typeof document !== 'undefined') {\n    document.addEventListener('click', (event) => {\n        if (isCustom(event)) {\n            return;\n        }\n\n        const title = findTitleInPath(event);\n\n        if (!title) {\n            return;\n        }\n\n        toggleCut(title);\n    });\n}\n","export const Selector = {\n    TITLE: '.yfm .yfm-term_title',\n    CONTENT: '.yfm .yfm-term_dfn',\n};\nexport const openClass = 'open';\nexport const openDefinitionClass = Selector.CONTENT.replace(/\\./g, '') + ' ' + openClass;\nlet isListenerNeeded = true;\n\nexport function createDefinitionElement(termElement: HTMLElement) {\n    const termKey = termElement.getAttribute('term-key');\n    const definitionTemplate = document.getElementById(\n        `${termKey}_template`,\n    ) as HTMLTemplateElement;\n    const definitionElement = definitionTemplate?.content.cloneNode(true).firstChild as HTMLElement;\n\n    definitionTemplate?.parentElement?.appendChild(definitionElement);\n    definitionTemplate.remove();\n\n    return definitionElement;\n}\n\nexport function setDefinitionId(definitionElement: HTMLElement, termElement: HTMLElement): void {\n    const termId = termElement.getAttribute('id') || Math.random().toString(36).substr(2, 8);\n    definitionElement?.setAttribute('term-id', termId);\n}\n\nexport function setDefinitionPosition(\n    definitionElement: HTMLElement,\n    termElement: HTMLElement,\n): void {\n    const {\n        x: termX,\n        y: termY,\n        right: termRight,\n        left: termLeft,\n        width: termWidth,\n        height: termHeight,\n    } = termElement.getBoundingClientRect();\n\n    const termParent = termParentElement(termElement);\n\n    if (!termParent) {\n        return;\n    }\n\n    const {right: termParentRight, left: termParentLeft} = termParent.getBoundingClientRect();\n\n    if ((termParentRight < termLeft || termParentLeft > termRight) && !isListenerNeeded) {\n        closeDefinition(definitionElement);\n        return;\n    }\n\n    if (isListenerNeeded && termParent) {\n        termParent.addEventListener('scroll', termOnResize);\n        isListenerNeeded = false;\n    }\n\n    const relativeX = Number(definitionElement.getAttribute('relativeX'));\n    const relativeY = Number(definitionElement.getAttribute('relativeY'));\n\n    if (relativeX === termX && relativeY === termY) {\n        return;\n    }\n\n    definitionElement.setAttribute('relativeX', String(termX));\n    definitionElement.setAttribute('relativeY', String(termY));\n\n    const offsetTop = termHeight + 5;\n    const definitionParent = definitionElement.parentElement;\n\n    if (!definitionParent) {\n        return;\n    }\n\n    const {width: definitionWidth} = definitionElement.getBoundingClientRect();\n    const {left: definitionParentLeft} = definitionParent.getBoundingClientRect();\n\n    // If definition not fit document change base alignment\n    const definitionRightCoordinate = definitionWidth + Number(getCoords(termElement).left);\n    const fitDefinitionDocument =\n        document.body.clientWidth > definitionRightCoordinate ? 0 : definitionWidth - termWidth;\n\n    const customHeaderTop = getCoords(definitionParent).top - definitionParent.offsetTop;\n\n    definitionElement.style.top =\n        Number(getCoords(termElement).top + offsetTop - customHeaderTop) + 'px';\n    definitionElement.style.left =\n        Number(\n            getCoords(termElement).left -\n                definitionParentLeft +\n                definitionParent.offsetLeft -\n                fitDefinitionDocument,\n        ) + 'px';\n}\n\nfunction termOnResize() {\n    const openDefinition = document.getElementsByClassName(openDefinitionClass)[0] as HTMLElement;\n\n    if (!openDefinition) {\n        return;\n    }\n    const termId = openDefinition.getAttribute('term-id') || '';\n    const termElement = document.getElementById(termId);\n\n    if (!termElement) {\n        return;\n    }\n\n    setDefinitionPosition(openDefinition, termElement);\n}\n\nfunction termParentElement(term: HTMLElement | null) {\n    if (!term) {\n        return null;\n    }\n\n    const closestScrollableParent = term.closest('table') || term.closest('code');\n\n    return closestScrollableParent || term.parentElement;\n}\n\nexport function closeDefinition(definition: HTMLElement) {\n    definition.classList.remove(openClass);\n    const termId = definition.getAttribute('term-id') || '';\n    const termParent = termParentElement(document.getElementById(termId));\n\n    if (!termParent) {\n        return;\n    }\n\n    termParent.removeEventListener('scroll', termOnResize);\n    isListenerNeeded = true;\n}\n\nfunction getCoords(elem: HTMLElement) {\n    const box = elem.getBoundingClientRect();\n\n    const body = document.body;\n    const docEl = document.documentElement;\n\n    const scrollTop = window.pageYOffset || docEl.scrollTop || body.scrollTop;\n    const scrollLeft = window.pageXOffset || docEl.scrollLeft || body.scrollLeft;\n\n    const clientTop = docEl.clientTop || body.clientTop || 0;\n    const clientLeft = docEl.clientLeft || body.clientLeft || 0;\n\n    const top = box.top + scrollTop - clientTop;\n    const left = box.left + scrollLeft - clientLeft;\n\n    return {top: Math.round(top), left: Math.round(left)};\n}\n","import {\n    Selector,\n    openClass,\n    openDefinitionClass,\n    createDefinitionElement,\n    setDefinitionId,\n    setDefinitionPosition,\n    closeDefinition,\n} from './utils';\nimport {getEventTarget, isCustom} from '../utils';\n\nif (typeof document !== 'undefined') {\n    document.addEventListener('click', (event) => {\n        const openDefinition = document.getElementsByClassName(\n            openDefinitionClass,\n        )[0] as HTMLElement;\n        const target = getEventTarget(event) as HTMLElement;\n\n        const termId = target.getAttribute('id');\n        const termKey = target.getAttribute('term-key');\n        let definitionElement = document.getElementById(termKey + '_element');\n\n        if (termKey && !definitionElement) {\n            definitionElement = createDefinitionElement(target);\n        }\n\n        const isSameTerm = openDefinition && termId === openDefinition.getAttribute('term-id');\n        if (isSameTerm) {\n            closeDefinition(openDefinition);\n            return;\n        }\n\n        const isTargetDefinitionContent = target.closest(\n            [Selector.CONTENT.replace(' ', ''), openClass].join('.'),\n        );\n\n        if (openDefinition && !isTargetDefinitionContent) {\n            closeDefinition(openDefinition);\n        }\n\n        if (isCustom(event) || !target.matches(Selector.TITLE) || !definitionElement) {\n            return;\n        }\n\n        setDefinitionId(definitionElement, target);\n        setDefinitionPosition(definitionElement, target);\n\n        definitionElement.classList.toggle(openClass);\n    });\n\n    document.addEventListener('keydown', (event) => {\n        const openDefinition = document.getElementsByClassName(\n            openDefinitionClass,\n        )[0] as HTMLElement;\n        if (event.key === 'Escape' && openDefinition) {\n            closeDefinition(openDefinition);\n        }\n    });\n\n    window.addEventListener('resize', () => {\n        const openDefinition = document.getElementsByClassName(\n            openDefinitionClass,\n        )[0] as HTMLElement;\n\n        if (!openDefinition) {\n            return;\n        }\n\n        const termId = openDefinition.getAttribute('term-id') || '';\n        const termElement = document.getElementById(termId);\n\n        if (!termElement) {\n            openDefinition.classList.toggle(openClass);\n            return;\n        }\n\n        setDefinitionPosition(openDefinition, termElement);\n    });\n}\n"],"names":["document","e","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","selector","rootNode","getRootNode","call","querySelectorAll","th","Array","prototype","some","Element","Selector","ClassName"],"mappings":"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"}